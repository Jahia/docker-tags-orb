description: >
  This command generates missing Docker tags for a given version
# What will this command do?
# Descriptions should be short, simple, and clear.
parameters:
  version:
    type: string
    default: "1.0.0.0"
    description: "Version to run the check towards"
  org:
    type: string
    default: "jahia"
    description: "Docker registry (i.e. Docker Hub) organization"
  repo:
    type: string
    default: "jahia"
    description: "Docker registry (i.e. Docker Hub) repository"
  useranme:
    type: string
    default: ""
    description: "Docker registry (i.e. Docker Hub) username. Needs read/write access"
  password:
    type: string
    default: ""
    description: "Docker registry (i.e. Docker Hub) password. Needs read/write access"
  dry-run:
    type: boolean
    default: true
    description: "Dry Run: Do not push changes"    
steps:
  - run:
      environment:
        PARAM_VERSION: <<parameters.version>>
        PARAM_ORG: <<parameters.org>>
        PARAM_REPO: <<parameters.repo>>
        PARAM_USERNAME: <<parameters.useranme>>
        PARAM_PASSWORD: <<parameters.password>>
      name: Generate missing Docker tags
      command: <<include(scripts/docker-tags.sh)>>
